Atividade \- 20/05

1. **Definition of Ready (DoR)**

A Definition of Ready (DoR) é um conjunto de critérios que uma User Story ou item do Backlog deve
atender para ser considerado pronto para o início do trabalho em uma Sprint. Quando um item cumpre
esses critérios, ele está apto a ser selecionado para desenvolvimento. Para ser considerado "Ready",
o item deve atender aos seguintes requisitos:

- [ ] **Formato da User Story**: A história de usuário está escrita no formato "Eu, como \[ator\],
      quero \[ação\], para que \[objetivo\]"?
- [ ] **Clareza e ausência de ambiguidades**: A história de usuário e seu título são claros, sem
      margem para interpretações divergentes por parte dos desenvolvedores e stakeholders?
- [ ] **Critérios de Aceitação definidos**: Os stakeholders forneceram os critérios de aceitação,
      especificando as ações e comportamentos esperados do software durante os testes?
- [ ] **Protótipo da interface**: Os stakeholders forneceram o protótipo da interface esperada?
      Dentro da empresa, a assessoria de imagem e o designer realizaram reuniões para projetar as
      páginas, e novas páginas foram aprovadas por essa assessoria?
- [ ] **Validação pelo Coordenador de Requisitos**: O requisito foi revisado e aprovado pelo
      Coordenador de Requisitos, garantindo conformidade com padrões de qualidade, incluindo
      clareza, viabilidade técnica e documentação completa, sem ambiguidades?
- [ ] **Estimativa**: As histórias devem possuir estimativa clara (story points ou horas), alinhado
      ao padrão DEEP, está em conformidade ?
- [ ] **Revisão técnica prévia**: Um desenvolvedor efetuou a validação previamente a viabilidade
      técnica ?
- [ ] **Rastreabilidade inicial**: O requisito está sendo rastreável ao objetivo de negócio já na
      fase inicial (utilizando matriz RR-Traceability) ?

2. **Definition of Done (DoD)**

A Definition of Done (DoD) é o conjunto de critérios que uma User Story ou item do Backlog deve
atender para ser considerado concluído. Esses critérios garantem que o item foi entregue com
qualidade e está pronto para uso. Os requisitos para considerar um item "Done" são:

- [ ] **Conformidade com o protótipo**: A interface está alinhada ao protótipo fornecido pelo
      designer e aprovado pelos stakeholders?
- [ ] **Atendimento aos critérios de aceitação**: Todos os critérios de aceitação definidos pelos
      stakeholders, incluindo ações e comportamentos esperados, foram cumpridos?
- [ ] **Integração entre backend e frontend (quando aplicável)**: O backend foi corretamente
      integrado ao frontend, garantindo funcionamento pleno?
- [ ] **Revisão de código**: O código passou por revisão de pares, com aprovação de pelo menos dois
      revisores, conforme o processo ScrumXP, garantindo qualidade e aderência aos padrões do
      projeto?
- [ ] **Validação do backend (quando aplicável)**: O backend foi revisado e validado pelo
      coordenador Daniel Rodrigues, assegurando manipulação segura dos dados?
- [ ] **Integração ao branch principal**: A funcionalidade foi integrada ao branch principal sem
      conflitos ou impactos negativos em outras funcionalidades ou no projeto como um todo?
- [ ] **Disponibilidade para validação**: A funcionalidade está disponível em um ambiente de
      homologação ou produção, pronta para validação pelos stakeholders?
- [ ] **Testes de aceitação documentados**: Os resultados dos testes devem ser claramente
      documentados, não apenas executados.
- [ ] **Validação formal do PO**: O Product Owner efetuou a validação formal após a implementação?

3. **Priorização do Backlog**

A priorização dos itens do backlog foi conduzida utilizando a técnica MoSCoW, que organiza as
funcionalidades em quatro categorias:

- **Must have**: Funcionalidades indispensáveis para o funcionamento do produto, prioritárias para
  entrega na versão inicial.
- **Should have**: Funcionalidades relevantes, mas que podem ser implementadas após as prioritárias.
- **Could have**: Funcionalidades desejáveis que agregam valor, mas não são essenciais no escopo
  inicial.
- **Won't have**: Funcionalidades descartadas para o momento, com possibilidade de inclusão em
  versões futuras.

O objetivo da priorização é direcionar o desenvolvimento para as funcionalidades mais críticas,
alinhando o produto às demandas do negócio e otimizando os recursos disponíveis. A tabela a seguir
apresenta a classificação detalhada de cada item do backlog, garantindo clareza e organização para
as próximas fases do projeto.

4. **Engenharia de Requisitos**

**Atividades e suas técnicas**

**Planejamento Inicia**l

- **Elicitação e Descoberta**

**_Lean Inception:_** A técnica Lean Inception será utilizada para levantar os requisitos iniciais
do produto. Por meio de workshops colaborativos, o time e os stakeholders alinharão a visão do
produto, criando um backlog inicial priorizado e pronto para iniciar a primeira sprint.

**Planejamento da Sprint**

**Análise e Consenso**

- **_Lean Inception_**: Será aplicada novamente para priorizar requisitos, definir os problemas e
  alinhar as expectativas do time.
- **_MoSCoW:_** Técnica utilizada para priorizar funcionalidades em "Must Have", "Should Have",
  "Could Have" e "Won't Have", garantindo foco nas entregas essenciais.
- **_Workshop de Requisitos:_** Técnica utilizada juntamente com a Lean Inception para resolver
  conflitos a respeito do escopo do projeto a fim de definir os critérios de priorização.

**Elicitação e Descoberta**

- **Entrevistas com Stakeholders:** Será conduzida uma série de perguntas com os stakeholders para
  identificar novas funcionalidades necessárias e ajustar o backlog do produto.

**Declaração e Organização**

- **_Lean Inception:_** As User Stories (US) serão declaradas e organizadas no backlog, com base nas
  discussões e prioridades definidas durante a Lean Inception.
- **_Backlog de Requisitos_**: A organização das histórias será baseada em critérios claros e
  alinhados, com foco no refinamento contínuo do backlog.

**Execução da Sprint**

**Verificação e Validação**

- **_DoR:_** Será definido o conjunto de critérios que uma User Story precisa atender para estar
  pronta para desenvolvimento.
- **_DoD_** (Definition of Done): As histórias finalizadas serão verificadas para garantir que
  atendem aos critérios de aceitação definidos no DoD. Isso inclui a validação técnica e funcional.

**Organização e Atualização**

- **_Backlog de Requisitos:_** Durante a execução, o backlog será atualizado continuamente com o
  progresso das histórias, garantindo que o trabalho esteja sempre alinhado com as entregas.

**Revisão da Sprint**

**Validação**

- **_Coleta de Feedback:_** Durante a apresentação do produto da sprint, os stakeholders fornecerão
  feedbacks que serão validados e discutidos com o Product Owner (P.O.) para ajustes no backlog.

**Retrospectiva**

**Organização e Atualização**

- **_Backlog de Requisitos:_** Após a coleta de feedbacks, o backlog será ajustado com base nos
  novos critérios definidos.
- **_Pontos por Histórias:_** As User Stories serão reavaliadas e pontuadas conforme o esforço
  necessário, garantindo uma organização eficiente para a próxima iteração.

5. **Backlog**

| Tipo de item | Título                                                                          | Pontos da história |
| :----------- | :------------------------------------------------------------------------------ | :----------------- |
| Tarefa       | Task Template                                                                   |                    |
| História     | US-00: UserStory Template                                                       |                    |
| Tarefa       | Criar a tela de home page                                                       |                    |
| História     | US-31: Excluir pergunta jurídica                                                |                    |
| História     | US-30: Editar pergunta jurídica                                                 |                    |
| História     | US-29: Exibir lista de perguntas cadastradas                                    |                    |
| História     | US-28: Relacionar pergunta jurídica a outras perguntas                          |                    |
| História     | US-27: Exportar relatório de teses em PDF                                       |                    |
| História     | US-26: Excluir questionário respondido                                          |                    |
| História     | US-25: Visualizar relatório de teses aplicáveis                                 |                    |
| História     | US-24: Editar respostas salvas de questionários anteriores                      |                    |
| História     | US-23: Salvar respostas de questionário                                         |                    |
| História     | US-22: Iniciar e responder questionário jurídico                                |                    |
| História     | US-21: Relacionar tese a perguntas jurídicas                                    |                    |
| História     | US-20: Criar pergunta jurídica                                                  |                    |
| História     | US-19: Filtrar teses por categoria                                              |                    |
| História     | US-18: Pesquisar tese por nome, palavra-chave ou categoria                      |                    |
| História     | US-17: Visualizar lista de teses cadastradas                                    |                    |
| História     | US-16: Criar categorias de teses                                                |                    |
| História     | US-15: Categorizar tese tributária                                              |                    |
| História     | US-14: Excluir tese tributária                                                  |                    |
| História     | US-13: Editar tese tributária existente                                         |                    |
| História     | US-12: Criar tese tributária                                                    |                    |
| História     | US-11: Atualizar ou reconsultar dados de um CNPJ                                |                    |
| História     | US-10: Associar informações do CNPJ às perguntas do sistema                     |                    |
| História     | US-09: Associar informações do CNPJ às teses aplicáveis                         |                    |
| História     | US-08: Pré-preencher campos do questionário com dados do CNPJ                   |                    |
| História     | US-07: Listar empresas já consultadas                                           |                    |
| História     | US-06: Revisar e editar manualmente dados do CNPJ                               |                    |
| História     | US-05: Armazenar temporariamente dados do CNPJ para uso interno                 |                    |
| História     | US-04: Exibir informações públicas do CNPJ                                      |                    |
| História     | US-03: Consultar dados públicos do CNPJ via API                                 |                    |
| História     | US-02: Validar formato do CNPJ inserido                                         |                    |
| História     | US-01: Inserir número de CNPJ para análise                                      |                    |
| Subtarefa    | Esclarecer cronograma de entregas                                               |                    |
| Subtarefa    | Avaliar processo escolhido                                                      |                    |
| Subtarefa    | Esclarecer impactos da solução                                                  |                    |
| Subtarefa    | Relacionar características do produto aos objetivos específicos                 |                    |
| Subtarefa    | Estabelecer objetivo principal e objetivos verificáveis                         |                    |
| Subtarefa    | Especificar parâmetros subjetivos                                               |                    |
| Tarefa       | \[DOC\] Fazer correções indicadas pelo professor a respeito da visão de produto |                    |
| Tarefa       | \[MEETING\] Kick-off técnico com cliente realizado                              |                    |
| Tarefa       | \[CODE\] Linter \+ Husky configurados                                           |                    |
| Tarefa       | \[DOC\] Definição do DoR e DoD v1.0                                             |                    |
| Tarefa       | \[CI/CD\] Pipeline de CI no GitHub Actions                                      |                    |
| Tarefa       | \[TECH\] Configuração de ambiente local com Docker                              |                    |
| Tarefa       | \[DOC\] Repositórios criados & políticas de branch                              |                    |
| Tarefa       | \[DOC\] Backlog inicial estruturado                                             |                    |
| Epic         | EP-06: Autenticação e Controle de Acesso                                        |                    |
| Epic         | EP-05: Gerenciamento de CNPJ                                                    |                    |
| Epic         | EP-04: Geração de Relatório de Teses Aplicáveis                                 |                    |
| Epic         | EP-03: Questionário de Diagnóstico Tributário                                   |                    |
| Epic         | EP-02: Gerenciamento de Perguntas                                               |                    |
| Epic         | EP-01: Gerenciamento de Teses Jurídicas                                         |                    |

### **CNPJ e Dados da Empresa**

**US-01: Inserir número de CNPJ para análise**  
 Como usuário, quero inserir o número de CNPJ de uma empresa para análise, para iniciar a consulta
de informações relevantes.

**US-02: Validar formato do CNPJ inserido**  
 Como sistema, quero validar o formato do CNPJ inserido pelo usuário, para garantir que ele esteja
correto antes de prosseguir com a consulta.

**US-03: Consultar dados públicos do CNPJ via API**  
 Como sistema, quero consultar os dados públicos de um CNPJ através de uma API externa, para obter
informações atualizadas automaticamente.

**US-04: Exibir informações públicas do CNPJ**  
 Como usuário, quero visualizar os dados públicos obtidos do CNPJ, para entender melhor o perfil da
empresa consultada.

**US-05: Armazenar temporariamente dados do CNPJ para uso interno**  
 Como sistema, quero armazenar temporariamente os dados do CNPJ consultado, para utilizá-los em
outras funcionalidades enquanto o usuário estiver ativo.

**US-06: Revisar e editar manualmente dados do CNPJ**  
 Como usuário, quero revisar e corrigir manualmente os dados do CNPJ consultado, para garantir que
estejam corretos antes de usar em análises.

**US-07: Listar empresas já consultadas**  
 Como usuário, quero visualizar uma lista de empresas cujos CNPJs já foram consultados, para
reutilizar informações sem precisar fazer nova consulta.

**US-08: Pré-preencher campos do questionário com dados do CNPJ**  
 Como usuário, quero que os dados do CNPJ preencham automaticamente os campos do questionário, para
economizar tempo e evitar erros de digitação.

**US-09: Associar informações do CNPJ às teses aplicáveis**  
 Como sistema, quero associar automaticamente os dados do CNPJ às teses tributárias relevantes, para
facilitar a geração de diagnósticos.

**US-10: Associar informações do CNPJ às perguntas do sistema**  
 Como sistema, quero vincular as informações do CNPJ às perguntas jurídicas, para tornar os
questionários mais personalizados e precisos.

**US-11: Atualizar ou reconsultar dados de um CNPJ**  
 Como usuário, quero atualizar os dados de um CNPJ já consultado, para garantir que estou utilizando
informações recentes na análise.

---

### **Teses Tributárias**

**US-12: Criar tese tributária**  
 Como advogado, quero cadastrar novas teses tributárias no sistema, para ampliar a base de
conhecimento jurídico da plataforma.

**US-13: Editar tese tributária existente**  
 Como advogado, quero editar as teses tributárias já cadastradas, para manter as informações sempre
atualizadas e corretas.

**US-14: Excluir tese tributária**  
 Como administrador, quero excluir uma tese tributária do sistema, para remover conteúdos
desatualizados ou incorretos.

**US-15: Categorizar tese tributária**  
 Como usuário, quero associar categorias às teses tributárias, para facilitar sua organização e
pesquisa.

**US-16: Criar categorias de teses**  
 Como administrador, quero criar novas categorias para agrupar teses tributárias, para manter a base
de dados organizada.

**US-17: Visualizar lista de teses cadastradas**  
 Como usuário, quero ver todas as teses tributárias cadastradas, para consultar e aplicar nos casos
que estou analisando.

**US-18: Pesquisar tese por nome, palavra-chave ou categoria**  
 Como usuário, quero buscar teses tributárias usando filtros e palavras-chave, para encontrar
rapidamente as mais relevantes.

**US-19: Filtrar teses por categoria**  
 Como usuário, quero aplicar filtros por categoria nas teses, para facilitar a navegação e análise
por temas jurídicos.

**US-20: Criar pergunta jurídica**  
 Como administrador, quero cadastrar novas perguntas jurídicas, para usá-las nos questionários e
relacioná-las a teses.

**US-21: Relacionar tese a perguntas jurídicas**  
 Como administrador, quero vincular teses tributárias às perguntas jurídicas, para construir
diagnósticos automatizados e contextualizados.

---

### **Questionários**

**US-22: Iniciar e responder questionário jurídico**  
 Como usuário, quero iniciar e responder um questionário jurídico, para avaliar a aplicabilidade de
teses tributárias ao meu caso.

**US-23: Salvar respostas de questionário**  
 Como usuário, quero salvar as respostas de um questionário, para continuar posteriormente ou manter
um histórico da análise.

**US-24: Editar respostas salvas de questionários anteriores**  
 Como usuário, quero editar as respostas de questionários já preenchidos, para corrigir ou atualizar
as informações fornecidas.

**US-25: Visualizar relatório de teses aplicáveis**  
 Como usuário, quero visualizar um relatório com as teses tributárias aplicáveis com base nas
respostas do questionário, para facilitar a tomada de decisão.

**US-26: Excluir questionário respondido**  
 Como usuário, quero excluir um questionário que já respondi, para manter meu histórico limpo e
relevante.

---

### **Exportação e Relacionamentos**

**US-27: Exportar relatório de teses em PDF**  
 Como usuário, quero exportar o relatório de teses aplicáveis em formato PDF, para compartilhamento
ou impressão.

**US-28: Relacionar pergunta jurídica a outras perguntas**  
 Como administrador, quero relacionar perguntas jurídicas entre si, para criar lógicas de
dependência ou encadeamento nos questionários.

**US-29: Exibir lista de perguntas cadastradas**  
 Como usuário, quero visualizar todas as perguntas jurídicas disponíveis, para entender as opções
que podem ser usadas em diagnósticos.

**US-30: Editar pergunta jurídica**  
 Como administrador, quero editar perguntas jurídicas já cadastradas, para ajustar seu conteúdo
conforme necessário.

**US-31: Excluir pergunta jurídica**  
 Como administrador, quero excluir perguntas jurídicas do sistema, para remover aquelas que não são
mais úteis ou estão desatualizadas.

### **Must have (Deve ter)**

Essenciais para o funcionamento mínimo da plataforma:

- **US-01**: Inserir número de CNPJ para análise

- **US-02**: Validar formato do CNPJ inserido

- **US-03**: Consultar dados públicos do CNPJ via API

- **US-04**: Exibir informações públicas do CNPJ

- **US-05**: Armazenar temporariamente dados do CNPJ para uso interno

- **US-12**: Criar tese tributária

- **US-17**: Visualizar lista de teses cadastradas

- **US-18**: Pesquisar tese por nome, palavra-chave ou categoria

- **US-20**: Criar pergunta jurídica

- **US-22**: Iniciar e responder questionário jurídico

- **US-23**: Salvar respostas de questionário

- **US-25**: Visualizar relatório de teses aplicáveis

---

### **Should have (Deveria ter)**

Importantes para melhorar a experiência, mas não essenciais no MVP:

- **US-06**: Revisar e editar manualmente dados do CNPJ

- **US-07**: Listar empresas já consultadas

- **US-08**: Pré-preencher campos do questionário com dados do CNPJ

- **US-09**: Associar informações do CNPJ às teses aplicáveis

- **US-10**: Associar informações do CNPJ às perguntas do sistema

- **US-13**: Editar tese tributária existente

- **US-15**: Categorizar tese tributária

- **US-16**: Criar categorias de teses

- **US-21**: Relacionar tese a perguntas jurídicas

- **US-24**: Editar respostas salvas de questionários anteriores

- **US-27**: Exportar relatório de teses em PDF

- **US-29**: Exibir lista de perguntas cadastradas

---

### **Could have (Poderia ter)**

Desejáveis, mas podem ser adiadas ou desenvolvidas após a entrega principal:

- **US-11**: Atualizar ou reconsultar dados de um CNPJ

- **US-14**: Excluir tese tributária

- **US-19**: Filtrar teses por categoria

- **US-26**: Excluir questionário respondido

- **US-28**: Relacionar pergunta jurídica a outras perguntas

- **US-30**: Editar pergunta jurídica

- **US-31**: Excluir pergunta jurídica

### Backlog

| ID    | Descrição da história                                  | Priorização (MoSCoW) | Épico Relacionado                | Requisitos Relacionados |
| :---- | :----------------------------------------------------- | :------------------- | :------------------------------- | :---------------------- |
| US-01 | Inserir número de CNPJ para análise                    | **Must**             | EP-05 Gerenciamento de CNPJ      | RF-01                   |
| US-02 | Validar formato do CNPJ inserido                       | **Must**             | EP-05                            | RF-02                   |
| US-03 | Consultar dados públicos do CNPJ via API               | **Must**             | EP-05                            | RF-03                   |
| US-04 | Exibir informações públicas do CNPJ                    | **Must**             | EP-05                            | RF-04                   |
| US-05 | Armazenar temporariamente dados do CNPJ                | **Must**             | EP-05                            | RF-05                   |
| US-06 | Revisar e editar manualmente dados do CNPJ             | **Should**           | EP-05                            | RF-06                   |
| US-07 | Listar empresas já consultadas                         | **Should**           | EP-05                            | RF-07                   |
| US-08 | Pré-preencher campos do questionário com dados do CNPJ | **Should**           | EP-05 / EP-03                    | RF-08                   |
| US-09 | Associar informações do CNPJ às teses aplicáveis       | **Should**           | EP-05 / EP-04                    | RF-09                   |
| US-10 | Associar informações do CNPJ às perguntas do sistema   | **Should**           | EP-05 / EP-02                    | RF-10                   |
| US-11 | Atualizar ou reconsultar dados de um CNPJ              | **Could**            | EP-05                            | RF-11                   |
| US-12 | Criar tese tributária                                  | **Must**             | EP-01 Gerenciamento de Teses     | RF-12                   |
| US-13 | Editar tese tributária existente                       | **Should**           | EP-01                            | RF-13                   |
| US-14 | Excluir tese tributária                                | **Could**            | EP-01                            | RF-14                   |
| US-15 | Categorizar tese tributária                            | **Should**           | EP-01                            | RF-15                   |
| US-16 | Criar categorias de teses                              | **Should**           | EP-01                            | RF-16                   |
| US-17 | Visualizar lista de teses cadastradas                  | **Must**             | EP-01                            | RF-17                   |
| US-18 | Pesquisar tese por nome, palavra-chave ou categoria    | **Must**             | EP-01                            | RF-18                   |
| US-19 | Filtrar teses por categoria                            | **Could**            | EP-01                            | RF-19                   |
| US-20 | Criar pergunta jurídica                                | **Must**             | EP-02 Gerenciamento de Perguntas | RF-20                   |
| US-21 | Relacionar tese a perguntas jurídicas                  | **Should**           | EP-02 / EP-01                    | RF-21                   |
| US-22 | Iniciar e responder questionário jurídico              | **Must**             | EP-03 Questionário               | RF-22                   |
| US-23 | Salvar respostas de questionário                       | **Must**             | EP-03                            | RF-23                   |
| US-24 | Editar respostas salvas de questionários anteriores    | **Should**           | EP-03                            | RF-24                   |
| US-25 | Visualizar relatório de teses aplicáveis               | **Must**             | EP-04 Relatório                  | RF-25                   |
| US-26 | Excluir questionário respondido                        | **Could**            | EP-03                            | RF-26                   |
| US-27 | Exportar relatório de teses em PDF                     | **Should**           | EP-04                            | RF-27                   |
| US-28 | Relacionar pergunta jurídica a outras perguntas        | **Could**            | EP-02                            | RF-28                   |
| US-29 | Exibir lista de perguntas cadastradas                  | **Should**           | EP-02                            | RF-29                   |
| US-30 | Editar pergunta jurídica                               | **Could**            | EP-02                            | RF-30                   |
| US-31 | Excluir pergunta jurídica                              | **Could**            | EP-02                            | RF-31                   |

### **Detalhamento das Histórias de Usuário**

**US-01: Inserir número de CNPJ para análise**  
**Como** usuário, **quero** digitar um número de CNPJ de 14 dígitos **para** iniciar a análise da
empresa.

**Critérios de aceitação:**

- Dado um número válido de CNPJ inserido pelo usuário, ao clicar em consultar, o sistema aceita o
  formato e prossegue com a validação do mesmo.
- Caso o número não seja válido, uma mensagem informativa (“CNPJ inválido”) deve ser exibida ao
  usuário em no máximo 100 ms, impedindo o avanço para a etapa seguinte.

**US-02: Validar formato do CNPJ inserido** **Como** sistema, **quero** validar se o CNPJ possui 14
dígitos numéricos e dígitos verificadores corretos **para** impedir consultas inválidas.

**Critérios de aceitação:**

- Se o CNPJ não atender ao algoritmo de validação, deve retornar erro “formato inválido” (HTTP 422).
- Validação executa em ≤ 50 ms no cliente ou backend.

**US-03: Consultar dados públicos do CNPJ via API** **Como** sistema, **quero** consumir a API
pública para obter razão social e CNAE atualizados.

**Critérios de aceitação:**

- Timeout da requisição ≤ 3 s; se exceder, retorna “serviço indisponível”.
- Campos obrigatórios retornados: razão social, nome fantasia, CNAE principal.
- 95% das consultas completam em ≤ 1 s.

**US-04: Exibir informações públicas do CNPJ** **Como** usuário, **quero** visualizar os dados
obtidos do CNPJ **para** verificar rapidamente informações essenciais da empresa consultada.

**Critérios de aceitação:**

- Informações exibidas incluem razão social, nome fantasia, CNAE, regime tributário e situação
  cadastral.
- Carregamento da informação em até 2 segundos após consulta.

**US-05: Armazenar temporariamente dados do CNPJ**  
**Como** sistema, **quero** armazenar temporariamente os dados do CNPJ consultado **para**
utilizá-los em outras funcionalidades enquanto o usuário estiver ativo.

**Critérios de aceitação:**

- Os dados do CNPJ devem permanecer disponíveis durante toda a sessão ativa do usuário.
- Os dados devem ser automaticamente removidos após 30 minutos de inatividade.
- O sistema deve permitir ao usuário limpar manualmente os dados temporários.

**US-06: Revisar e editar manualmente dados do CNPJ**  
**Como** usuário, **quero** revisar e corrigir manualmente os dados do CNPJ consultado **para**
garantir que estejam corretos antes de usar em análises.

**Critérios de aceitação:**

- O usuário pode editar campos como razão social, CNAE, regime tributário e porte.
- Os campos editáveis são validados no momento da edição.
- Alterações são salvas apenas localmente para a sessão atual, sem sobrescrever o dado original
  retornado da API.

**US-07: Listar empresas já consultadas**  
**Como** usuário, **quero** visualizar uma lista de empresas cujos CNPJs já foram consultados
**para** reutilizar informações sem precisar fazer nova consulta.

**Critérios de aceitação:**

- O sistema deve listar os CNPJs consultados nas últimas 10 sessões do usuário autenticado.
- Deve ser possível selecionar uma empresa da lista para reusar os dados armazenados previamente.
- O histórico de empresas pode ser limpo manualmente pelo usuário.

**US-08: Pré-preencher campos do questionário com dados do CNPJ**  
**Como** usuário, **quero** que os dados do CNPJ preencham automaticamente os campos do questionário
**para** economizar tempo e evitar erros de digitação.

**Critérios de aceitação:**

- Os campos do questionário que dependem de dados do CNPJ (ex.: CNAE, regime) devem ser preenchidos
  automaticamente se uma consulta válida existir.
- O usuário pode sobrescrever os dados pré‑preenchidos manualmente.
- Caso não haja dados de CNPJ armazenados, os campos permanecem em branco.

**US-09: Associar informações do CNPJ às teses aplicáveis**  
**Como** sistema, **quero** vincular automaticamente os dados do CNPJ às teses tributárias
relevantes **para** facilitar a geração de diagnósticos.

**Critérios de aceitação:**

- Para cada CNPJ consultado, o sistema avalia e lista teses compatíveis em ≤ 2 s.
- O usuário visualiza pelo menos 1 tese sugerida ou mensagem "Nenhuma tese aplicável".
- Sugeridas podem ser confirmadas ou descartadas manualmente.

**US-10: Associar informações do CNPJ às perguntas do sistema**  
**Como** sistema, **quero** relacionar dados do CNPJ às perguntas jurídicas **para** personalizar o
questionário.

**Critérios de aceitação:**

- Perguntas irrelevantes são ocultadas automaticamente com base no CNAE ou regime tributário.
- Regra de decisão documentada em JSON e testável unitariamente.

**US-11: Atualizar ou reconsultar dados de um CNPJ**  
**Como** usuário, **quero** atualizar os dados de um CNPJ já consultado **para** garantir
informações recentes.

**Critérios de aceitação:**

- Botão "Reconsultar" executa nova chamada à API mantendo histórico (versão anterior).
- Tempo de resposta ≤ 3 s; versão anterior marcada como obsoleta.

---

### **Teses Tributárias**

**US-12: Criar tese tributária**  
**Como** advogado, **quero** cadastrar novas teses tributárias **para** ampliar a base de
conhecimento da plataforma.

**Critérios de aceitação:**

- Campos obrigatórios: título (único), descrição, base legal.
- Validação impede duplicidade de título.

**US-13: Editar tese tributária existente**  
**Como** advogado, **quero** editar teses já cadastradas **para** manter informações atualizadas.

**Critérios de aceitação:**

- Alterações são versionadas (histórico mantido).
- Edição só é permitida a perfis com papel "Advogado".

**US-14: Excluir tese tributária**  
**Como** administrador, **quero** excluir teses obsoletas **para** remover conteúdos incorretos.

**Critérios de aceitação:**

- Ação requer confirmação dupla.
- Exclusão lógica (soft‑delete) mantendo rastreabilidade.

**US-15: Categorizar tese tributária**  
**Como** usuário, **quero** associar categorias às teses **para** facilitar pesquisa.

**Critérios de aceitação:**

- Cada tese pode possuir ≥ 1 categoria.
- Categoria exibida em filtros e buscas.

**US-16: Criar categorias de teses**  
**Como** administrador, **quero** criar novas categorias **para** manter a base organizada.

**Critérios de aceitação:**

- Nome da categoria deve ser único e ≤ 50 caracteres.
- Categoria pode ser ativada/desativada sem excluir teses.

**US-17: Visualizar lista de teses cadastradas**  
**Como** usuário, **quero** listar todas as teses **para** consultar e aplicar nos casos.

**Critérios de aceitação:**

- Lista paginada, 20 itens por página.
- Busca por título imediata (≤ 300 ms client‑side).

**US-18: Pesquisar tese por nome, palavra‑chave ou categoria**  
**Como** usuário, **quero** buscar teses usando filtros **para** encontrar rapidamente as mais
relevantes.

**Critérios de aceitação:**

- Filtros combináveis (AND) em UI.
- Resultados ordenados por relevância.

**US-19: Filtrar teses por categoria**  
**Como** usuário, **quero** aplicar filtros de categoria **para** navegar por temas jurídicos.

**Critérios de aceitação:**

- Usuário seleciona múltiplas categorias simultaneamente.
- UI atualiza lista em tempo real.

**US-20: Criar pergunta jurídica**  
**Como** administrador, **quero** cadastrar novas perguntas jurídicas **para** usá‑las em
questionários.

**Critérios de aceitação:**

- Campos obrigatórios: enunciado, tipo de resposta (sim/não, texto, seleção).
- Pergunta fica "rascunho" até vinculada a pelo menos 1 tese.

**US-21: Relacionar tese a perguntas jurídicas**  
**Como** administrador, **quero** vincular teses às perguntas **para** diagnósticos automatizados.

**Critérios de aceitação:**

- Tela de arrastar‑soltar para associar.
- Uma pergunta pode vincular N teses e vice‑versa.

---

### **Questionários**

**US-22: Iniciar e responder questionário jurídico**  
**Como** usuário, **quero** iniciar um questionário jurídico **para** avaliar a aplicabilidade de
teses.

**Critérios de aceitação:**

- Questionário gerado com base no perfil de CNPJ e seleção de teses.
- Progresso salvo a cada resposta.
- Questionário conclui quando 100 % das perguntas obrigatórias respondidas.

**US-23: Salvar respostas de questionário**  
**Como** usuário, **quero** salvar as respostas **para** continuar depois.

**Critérios de aceitação:**

- Respostas são persistidas em banco a cada mudança.
- Versão incremental com timestamp.

**US-24: Editar respostas salvas de questionários anteriores**  
**Como** usuário, **quero** editar respostas passadas **para** corrigir informações.

**Critérios de aceitação:**

- Edição só permitida enquanto questionário não estiver "finalizado".
- Histórico de mudanças mantido.

**US-25: Visualizar relatório de teses aplicáveis**  
**Como** usuário, **quero** ver relatório de teses baseadas nas respostas **para** tomar decisão.

**Critérios de aceitação:**

- Relatório inclui teses aplicáveis, justificativa e probabilidade.
- Gerado em ≤ 2 s após conclusão.

**US-26: Excluir questionário respondido**  
**Como** usuário, **quero** excluir questionários antigos **para** manter histórico limpo.

**Critérios de aceitação:**

- Exclusão lógica; registro fica inacessível ao usuário mas mantido para auditoria.
- Ação reversível por administrador em até 30 dias.

---

### **Exportação e Relacionamentos**

**US-27: Exportar relatório de teses em PDF**  
**Como** usuário, **quero** exportar o relatório em PDF **para** compartilhamento.

**Critérios de aceitação:**

- Geração de PDF em ≤ 5 s.
- Arquivo gerado segue branding institucional.

**US-28: Relacionar pergunta jurídica a outras perguntas**  
**Como** administrador, **quero** relacionar perguntas entre si **para** criar lógicas condicionais.

**Critérios de aceitação:**

- É possível definir dependência do tipo "Se Pergunta X \= sim, mostrar Pergunta Y".
- Dependências testadas via testes unitários.

**US-29: Exibir lista de perguntas cadastradas**  
**Como** usuário, **quero** listar todas as perguntas jurídicas **para** entender opções de
diagnóstico.

**Critérios de aceitação:**

- Lista paginada e pesquisável por texto.
- Cada item exibe número de teses vinculadas.

**US-30: Editar pergunta jurídica**  
**Como** administrador, **quero** editar perguntas **para** ajustar conteúdo.

**Critérios de aceitação:**

- Edição versionada.
- Alteração notifica usuários impactados.

**US-31: Excluir pergunta jurídica**  
**Como** administrador, **quero** excluir perguntas obsoletas **para** manter base atualizada.

**Critérios de aceitação:**

- Pergunta só pode ser excluída se não estiver em questionários ativos.
- Exclusão lógica com possibilidade de restauração em 30 dias.

Observações da Análise dos Critérios de Priorização

A análise apresenta os critérios usados para classificar requisitos como Must, Should ou Could com
base em sua importância para o MVP e impacto geral. Veja os principais pontos:

Criticidade para o MVP / Funcionalidade Essencial (Must)

Requisitos essenciais para que o produto funcione minimamente ou entregue valor central. Sem eles, o
fluxo principal não se sustenta.  
Exs.: Inserir/Consultar CNPJ, Criar tese, Responder questionário, Segurança, Autenticação.

Impacto na Experiência do Usuário e Usabilidade (Should/Could)

Funcionalidades que melhoram a experiência, mas não são bloqueadoras. Caso a usabilidade mínima não
seja atingida, pode haver riscos.  
Exs.: Editar dados, pré-preencher campos, linguagem clara.

Manutenção e Operação (Should)

Recursos voltados à gestão e atualização de conteúdo. São importantes, mas podem vir após o MVP.  
Exs.: Editar tese, visualizar lista de perguntas.

Soluções Alternativas / Execução Manual (Should)

Funcionalidades que podem ser substituídas por processos manuais no MVP, sendo priorizadas depois.  
Exs.: Associar CNPJ a tese, exportar PDF.

Valor Agregado vs. Necessidade Fundamental (Could)

Funcionalidades que trazem benefícios adicionais, mas não são essenciais para a entrega do valor
principal.  
Exs.: Filtrar por categoria, lógica condicional em perguntas.

Segurança e Conformidade (Must)

Requisitos não funcionais ligados à segurança são considerados essenciais.  
Exs.: HTTPS, autenticação, proteção contra SQL Injection.

Eficiência e Otimização (Should)

Melhoram a produtividade e o desempenho, mas não são indispensáveis.  
Exs.: Reuso de dados consultados, pré-preenchimento.
