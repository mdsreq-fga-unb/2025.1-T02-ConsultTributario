# US-09: Editar pergunta jurídica

---

## 1. Descrição

**Como** administrador

**Quero** editar perguntas jurídicas já cadastradas

**Para** ajustar seu conteúdo conforme necessário

## 2. Critérios de Aceitação

- **Cenário 1 – Edição bem-sucedida**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When altero o campo Pergunta para "ICMS sobre Energia Elétrica"
    And ajusto a Dica de resposta
    And seleciono 0 ou mais perguntas relacionadas ativas
    And clico em "Salvar alterações"
  Then vejo toast "Pergunta atualizada com sucesso"
    And a pergunta aparece atualizada na lista
    And a operação completa em ≤ 2 segundos
```

- **Cenário 2 – Campo Pergunta vazio**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When apago todo o texto do campo Pergunta
    And clico em "Salvar alterações"
  Then o sistema bloqueia o envio
    And destaca o campo em vermelho
    And exibe "Pergunta é obrigatória"
```

- **Cenário 3 – Duplicidade de título**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
    And já existe pergunta ativa "ICMS sobre Energia Elétrica"
  When tento salvar a edição com esse mesmo título
    And clico em "Salvar alterações"
  Then recebo erro "Essa pergunta já existe"
```

- **Cenário 4 – Limites de caracteres**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When tento digitar mais de 150 caracteres no campo Pergunta
    Or mais de 500 caracteres no campo Dica de resposta
  Then o sistema impede novos caracteres
```

- **Cenário 5 – Alterar status para Inativa**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When marco status = Inativa e salvo
    And clico em "Salvar alterações"
  Then vejo toast "Pergunta atualizada com sucesso"
    And a pergunta passa a ter status Inativa
    And deixa de aparecer em novos questionários e na lista de perguntas relacionadas
```

- **Cenário 6 – Lista de perguntas relacionadas não inclui a própria pergunta**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When abro o campo "Perguntas relacionadas"
  Then não vejo a pergunta que estou editando na lista
```

- **Cenário 7 – Cancelar/fechar modal**

```gherkin
  Given estou logado como Administrador
    And clico em uma pergunta para expandi-la
    And clico no ícone “Editar” da pergunta
    And o modal “Editar Pergunta” é exibido com os campos pré-preenchidos
  When clico em "Cancelar" ou no ícone "×" ou fora do modal
  Then o modal fecha
    And nenhuma alteração é salva
```

## 3. Dependências

- Nenhuma

## 4. Links e Anexos

- Documento da Feature: [Link](gerenciar-perguntas-tributarias.md)
- Protótipo: [Link](https://excalidraw.com/#json=uzeZOcOtPKE5hVSiMwpbg,8IjQKNJVapnkd55dPgTC6g)

---

### DoR e DoD

**[Link](../../visao-produto/dor-dod.md)**
