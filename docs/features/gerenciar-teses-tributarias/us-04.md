# US-04: Editar tese tributária

---

## 1. Descrição

**Como** administrador

**Quero** editar as teses tributárias já cadastradas

**Para** manter as teses sempre atualizadas e corretas

## 2. Critérios de Aceitação

- **Cenário 1 – Edição bem-sucedida**

```gherkin
  Given estou logado como Administrador
    And clico em uma tese para expandir
    And clico no botão “Editar”
    And sou redirecionado para a página de editar tese com suas informações carregadas
  When altero o campo Resumo
    And clico em "Salvar Alterações"
  Then vejo toast "Tese atualizada com sucesso"
    And sou redirecionado para a biblioteca de teses
    And a tese editada é atualizada na lista
    And a operação completa em ≤ 2 segundos
```

- **Cenário 2 – Título duplicado**

```gherkin
  Given estou logado como Administrador
    And clico em uma tese para expandir
    And clico no botão “Editar”
    And sou redirecionado para a página de editar tese com suas informações carregadas
  When atualizo o título para um que já existe
    And clico em "Salvar Alterações"
  Then o campo título é destacado em vermelho
    And exibe "Título já cadastrado"
```

- **Cenário 3 – Campo obrigatório vazio**

```gherkin
  Given estou logado como Administrador
    And clico em uma tese para expandir
    And clico no botão “Editar”
    And sou redirecionado para a página de editar tese com suas informações carregadas
  When deixo qualquer campo obrigatório (Título, Objetivo, Resumo,Período Recuperável, Valor Recuperável ou Tipo de Tributo) em branco
    And clico em "Salvar Tese"
  Then o(s) campo(s) são destacado(s) em vermelho
    And exibe "Campo obrigatório"
```

- **Cenário 4 – Limites de caracteres**

```gherkin
  Given estou logado como Administrador
    And clico em uma tese para expandir
    And clico no botão “Editar”
    And sou redirecionado para a página de editar tese com suas informações carregadas
  When digito >150 caracteres no Título
    Or >1 000 caracteres no Objetivo
    Or >5 000 caracteres no Resumo
    Or >1 000 caracteres no Período Recuperável / Valor Recuperável
  Then o sistema impede novos caracteres
```

- **Cenário 5 – Cancelar/sair da página**

```gherkin
  Given estou logado como Administrador
    And clico em uma tese para expandir
    And clico no botão “Editar”
    And sou redirecionado para a página de editar tese com suas informações carregadas
  When clico em "Cancelar" ou "Voltar"
  Then sou redirecionado para a biblioteca de teses
    And nenhuma alteração feita é salva
```

## 3. Dependências

- Schema **TaxType** criado no Mongoose (relação obrigatória com a Tese tributária).

## 4. Links e Anexos

- Documento da Feature: [Link](gerenciar-teses-tributarias.md)
- Protótipo: [Link]()

---

### DoR e DoD

**[Link](../../visao-produto/dor-dod.md)**
